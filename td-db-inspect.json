{
  "family": "db-inspect",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "executionRoleArn": "arn:aws:iam::852048987212:role/shopease-ecs-execution-role",
  "containerDefinitions": [
    {
      "name": "mysql-client",
      "image": "mysql:8.0",
      "essential": true,
      "command": [
        "sh", "-c",
        "echo '=== DATABASES ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB -e 'SHOW DATABASES;' && echo '' && echo '=== TABLES ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'SHOW TABLES;' && echo '' && echo '=== PRODUCTS TABLE ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'DESCRIBE products;' && echo '' && echo '=== USERS TABLE ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'DESCRIBE users;' && echo '' && echo '=== ORDERS TABLE ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'DESCRIBE orders;' && echo '' && echo '=== PAYMENTS TABLE ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'DESCRIBE payments;' && echo '' && echo '=== NOTIFICATIONS TABLE ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'DESCRIBE notifications;' && echo '' && echo '=== SAMPLE PRODUCTS ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'SELECT * FROM products;' && echo '' && echo '=== ROW COUNTS ===' && mysql -hshopease-mysql.cmni2wmcozyh.us-east-1.rds.amazonaws.com -uadmin -pShopEase2025!SecureDB shopease_db -e 'SELECT (SELECT COUNT(*) FROM products) as products, (SELECT COUNT(*) FROM users) as users, (SELECT COUNT(*) FROM orders) as orders, (SELECT COUNT(*) FROM payments) as payments, (SELECT COUNT(*) FROM notifications) as notifications;' && sleep 60"
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-create-group": "true",
          "awslogs-group": "/ecs/shopease",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "db-inspect"
        }
      }
    }
  ]
}